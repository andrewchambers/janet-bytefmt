(use ../build/bytefmt)

(assert (= "10B" (tracev (si-format-byte-size 10))))
(assert (= "1.00kB" (tracev (si-format-byte-size 1000))))
(assert (= "1.00MB" (tracev (si-format-byte-size 1000000))))
(assert (= "1.50MB" (tracev (si-format-byte-size 1500000))))
(assert (= "1.00GB" (tracev (si-format-byte-size 1000000000))))
(assert (= "1.00TB" (tracev (si-format-byte-size 1000000000000))))
(assert (= "10.00TB" (tracev (si-format-byte-size 10000000000000))))
(assert (= "10B" (tracev (binary-format-byte-size 10))))
(assert (= "1.00KiB" (tracev (binary-format-byte-size 1024))))
(assert (= "1.00MiB" (tracev (binary-format-byte-size (* 1024 1024)))))
(assert (= "1.50MiB" (tracev (binary-format-byte-size (* 1024 1024 1.5)))))
(assert (= "1.00GiB" (tracev (binary-format-byte-size (* 1024 1024 1024)))))
(assert (= "1.00TiB" (tracev (binary-format-byte-size (* 1024 1024 1024 1024)))))
(assert (= "10.00TiB" (tracev (binary-format-byte-size (* 10 1024 1024 1024 1024)))))
